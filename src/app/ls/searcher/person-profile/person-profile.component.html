<div class="row">
    <div class="col-3">
        <nb-card>
            <nb-card-body>
                <nb-user
                    [name]="personName"
                    [picture]="personPicture"
                    title="Teacher"
                    size="giant"
                    shape="semi-round"
                    >
                </nb-user>
            </nb-card-body>
        </nb-card>
        <nb-card>
            <nb-accordion multi>
                <nb-accordion-item expanded="true">
                    <nb-accordion-item-header>
                        Bio
                    </nb-accordion-item-header>
                    <nb-accordion-item-body>
                        A nebula is an interstellar cloud of dust, hydrogen, helium and other ionized gases.
                        Originally, nebula was a name for any diffuse astronomical object,
                        including galaxies beyond the Milky Way.
                    </nb-accordion-item-body>
                </nb-accordion-item>
                <nb-accordion-item expanded="true" *ngIf="affiliations.length > 0">
                    <nb-accordion-item-header>
                        Education
                    </nb-accordion-item-header>
                    <nb-accordion-item-body>
                        <div *ngFor="let edu of affiliations, let i = index"
                            (click)="navigateToInstitution(i)" style="cursor: pointer;">
                            <p class="accordion-item"> 
                                - {{edu[1]}}
                            </p>
                        </div>
                    </nb-accordion-item-body>
                </nb-accordion-item>
            </nb-accordion>
        </nb-card>
    </div>
    <div class="col-6">
        <nb-card>
            <nb-card-body>
                <nb-tabset>
                    <nb-tab tabTitle="Papers"
                            badgePosition="bottom right"
                            badgeText="{{paperCount}}"
                            badgeStatus="primary">
                            <nb-list>
                                <nb-list-item *ngFor="let paper of papers" style="display: flex; flex-direction: column; align-items: start;">
                                    <p><strong>{{paper.title}}</strong></p>
                                    <p><strong>Citations: </strong>{{paper.citations}} <strong>Year: </strong> {{paper.year}}</p>
                                    <p style="font-size: smaller;"><strong>Authors: </strong><a style="cursor: pointer;" *ngFor="let author of paper.co_authors" (click)='navigateToPerson(author.id)'>{{author.name}}, </a></p>
                                    <p style="font-size: smaller;" *ngIf="(paper.keywords.length > 0)"><strong>Keywords: </strong><span *ngFor="let keyword of paper.keywords">{{keyword}}, </span></p>
                                    <p style="font-size: smaller;" *ngIf="paper.venue"><strong>Venue: </strong><a style="cursor: pointer;" (click)="navigateToVenue(paper.venue.name)">{{paper.venue.name}}</a></p>
                                </nb-list-item>
                                <nb-list-item *ngIf="nPages > 1">
                                    <ls-paging-footer
                                        [currentPage]="currentPage" [maxPage]="nPages" (search)="handleNewPage($event)" [disabled]="loadingPages"></ls-paging-footer>
                                </nb-list-item>
                            </nb-list>
                    </nb-tab>
                    <nb-tab tabTitle="Patents"
                            badgeText="WIP"
                            badgePosition="bottom right"
                            badgeStatus="warning">
                      <p>List of patents is <strong>comming soon</strong>.</p>
                    </nb-tab>
                  </nb-tabset>
            </nb-card-body>
        </nb-card>
    </div>
    <div class="col-3">
        <nb-card>
            <nb-card-body>
                <h5 style="text-align: center;">General Statistics</h5>
                <div class="row">
                    <div class="col">
                        <strong>Publications:</strong> {{paperCount}}<br>
                        <strong>Citations:</strong> {{citationCount}}<br>
                        <strong>G-index:</strong> {{gIndex}}<br>
                    </div>
                    <div class="col"> 
                        <strong>h-index:</strong> {{hIndex}}<br>
                        <strong>i10-index:</strong> {{i10Index}}<br>
                        <strong>Impact:</strong> {{sociabilityIndex}}<br>
                    </div>
                </div>
            </nb-card-body>
        </nb-card>
        <nb-card *ngIf="chartData && chartData.length > 0">
            <nb-card-body>
                <ls-stacked-bar 
                    [data]="chartData" 
                    [title]="'Research areas'">
                </ls-stacked-bar>
            </nb-card-body>
        </nb-card>
        <nb-card>
            <nb-card-body style="display: flex; flex-direction: column;">
                <h5 style="text-align: center;">
                    Co-Authors
                </h5>
                <ls-chord-diagram
                    [matrix]="matrix" 
                    [labels]="labels"
                    class="chord-diagram"
                    [ngClass]="(matrix.length > 0) ? '' : 'chord-diagram-empty'">

                </ls-chord-diagram>
                <nb-list nbInfiniteList
                    [threshold]="100"
                    (bottomThreshold)="loadNext()"
                    style="max-height: 50vh;">
                    <nb-list-item *ngFor="let coAuthor of coAuthors">
                        
                        <div (click)="navigateToPerson(coAuthor[0])" style="cursor: pointer;">
                            <nb-user 
                                [name]="coAuthor[2]"
                                [picture]="getFakePicture(coAuthor[0])"
                                [badgeText]="coAuthor[1]"
                                badgePosition="bottom right">
                            </nb-user>
                        </div>
                    </nb-list-item>
                    <nb-list-item *ngFor="let _ of coAuthorsPlaceholers">
                        <ls-user-place-holder></ls-user-place-holder>
                    </nb-list-item>
                </nb-list>
            </nb-card-body>
        </nb-card>
    </div>
</div>